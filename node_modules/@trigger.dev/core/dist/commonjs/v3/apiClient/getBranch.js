"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getBranch = getBranch;
const getEnv_js_1 = require("../utils/getEnv.js");
function getBranch({ specified, gitMeta, }) {
    if (specified) {
        return specified;
    }
    // not specified, so detect our variable from process.env
    const envVar = (0, getEnv_js_1.getEnvVar)("TRIGGER_PREVIEW_BRANCH");
    if (envVar) {
        return envVar;
    }
    // detect the Vercel preview branch
    const vercelPreviewBranch = (0, getEnv_js_1.getEnvVar)("VERCEL_GIT_COMMIT_REF");
    if (vercelPreviewBranch) {
        return vercelPreviewBranch;
    }
    // not specified, so detect from git metadata
    if (gitMeta?.commitRef) {
        return gitMeta.commitRef;
    }
    return undefined;
}
//# sourceMappingURL=getBranch.js.map